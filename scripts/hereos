#!/usr/bin/env python

import getopt, sys, yaml, io

def usage():
  print "Welcome to HereOS"

def version():
  print "0.0.1"

def list_services():
	print "Available microservices in the HereOS SDK:\n"
	for service in yaml.load(io.open("config/services.yaml", "r")):
		print "\t%s\t%s" % (service["name"], service["description"])
	print ""

def main():
		if len(sys.argv) == 1:
				usage()
				sys.exit()

		try:
				opts, args = getopt.getopt(sys.argv[1:], "hvl", ["help", "version", "list-services"])
		except getopt.GetoptError as err:
				# print help information and exit:
				print str(err)
				usage()
				sys.exit(2)
		for o, a in opts:
				if o in ("-v", "--version"):
						version()
						sys.exit()
	 			elif o in ("-h", "--help"):
						usage()
						sys.exit()
				elif o in ("-l", "--list-services"):
						list_services()
						sys.exit()
				else:
						assert False, "unhandled option"

if __name__ == "__main__":
		main()

# vim: tabstop=4 shiftwidth=4 noexpandtab

